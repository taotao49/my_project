(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ede1e0aa"],{"9a28":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-main",{staticClass:"bg edit_wrap comtable_e"},[e.is_view()?t("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"120px"}},[t("el-row",{staticClass:"row_ce"},["管理员"===e.user_group||e.$check_field("get","user_account")||e.$check_field("add","user_account")||e.$check_field("set","user_account")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"用户账号",prop:"user_account"}},["管理员"!==e.user_group?t("div",[e._v(" "+e._s(e.get_user_session_user_account(e.form["user_account"]))+" "),"管理员"===e.user_group||e.form["cancel_order_id"]&&e.$check_field("set","user_account")||!e.form["cancel_order_id"]&&e.$check_field("add","user_account")?t("el-select",{attrs:{id:"user_account",disabled:e.disabledObj["user_account_isDisabled"]},model:{value:e.form["user_account"],callback:function(r){e.$set(e.form,"user_account",r)},expression:"form['user_account']"}},e._l(e.list_user_user_account,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e.$check_field("get","user_account")?t("el-select",{attrs:{id:"user_account",disabled:!0},model:{value:e.form["user_account"],callback:function(r){e.$set(e.form,"user_account",r)},expression:"form['user_account']"}},e._l(e.list_user_user_account,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1):e._e()],1):t("el-select",{attrs:{id:"user_account",disabled:e.disabledObj["user_account_isDisabled"]},model:{value:e.form["user_account"],callback:function(r){e.$set(e.form,"user_account",r)},expression:"form['user_account']"}},e._l(e.list_user_user_account,(function(e){return t("el-option",{key:e["username"],attrs:{label:e["nickname"]+"-"+e["username"],value:e["user_id"]}})})),1)],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","user_name")||e.$check_field("add","user_name")||e.$check_field("set","user_name")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"用户姓名",prop:"user_name"}},["管理员"===e.user_group||e.form["cancel_order_id"]&&e.$check_field("set","user_name")||!e.form["cancel_order_id"]&&e.$check_field("add","user_name")?t("el-input",{attrs:{id:"user_name",placeholder:"请输入用户姓名",disabled:e.disabledObj["user_name_isDisabled"]},model:{value:e.form["user_name"],callback:function(r){e.$set(e.form,"user_name",r)},expression:"form['user_name']"}}):e.$check_field("get","user_name")?t("div",[e._v(e._s(e.form["user_name"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","order_number")||e.$check_field("add","order_number")||e.$check_field("set","order_number")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"订单编号",prop:"order_number"}},["管理员"===e.user_group||e.form["cancel_order_id"]&&e.$check_field("set","order_number")||!e.form["cancel_order_id"]&&e.$check_field("add","order_number")?t("el-input",{attrs:{id:"order_number",placeholder:"请输入订单编号",disabled:e.disabledObj["order_number_isDisabled"]},model:{value:e.form["order_number"],callback:function(r){e.$set(e.form,"order_number",r)},expression:"form['order_number']"}}):e.$check_field("get","order_number")?t("div",[e._v(e._s(e.form["order_number"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","cancel_time")||e.$check_field("add","cancel_time")||e.$check_field("set","cancel_time")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"取消时间",prop:"cancel_time"}},["管理员"===e.user_group||e.form["cancel_order_id"]&&e.$check_field("set","cancel_time")||!e.form["cancel_order_id"]&&e.$check_field("add","cancel_time")?t("el-date-picker",{attrs:{disabled:e.disabledObj["cancel_time_isDisabled"],id:"cancel_time",type:"date",placeholder:"选择日期"},model:{value:e.form["cancel_time"],callback:function(r){e.$set(e.form,"cancel_time",r)},expression:"form['cancel_time']"}}):e.$check_field("get","cancel_time")?t("div",[e._v(e._s(e.form["cancel_time"]))]):e._e()],1)],1):e._e(),"管理员"===e.user_group||e.$check_field("get","reason_for_cancellation")||e.$check_field("add","reason_for_cancellation")||e.$check_field("set","reason_for_cancellation")?t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"取消原因",prop:"reason_for_cancellation"}},["管理员"===e.user_group||e.form["cancel_order_id"]&&e.$check_field("set","reason_for_cancellation")||!e.form["cancel_order_id"]&&e.$check_field("add","reason_for_cancellation")?t("el-input",{attrs:{type:"textarea",id:"reason_for_cancellation",placeholder:"请输入取消原因",disabled:e.disabledObj["reason_for_cancellation_isDisabled"]},model:{value:e.form["reason_for_cancellation"],callback:function(r){e.$set(e.form,"reason_for_cancellation",r)},expression:"form['reason_for_cancellation']"}}):e.$check_field("get","reason_for_cancellation")?t("div",[e._v(e._s(e.form["reason_for_cancellation"]))]):e._e()],1)],1):e._e(),t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"审核状态",prop:"examine_state"}},["管理员"===e.user_group||e.form["examine_state"]&&e.$check_examine()||!e.form["examine_state"]&&e.$check_examine()?t("el-select",{attrs:{id:"examine_state"},model:{value:e.form["examine_state"],callback:function(r){e.$set(e.form,"examine_state",r)},expression:"form['examine_state']"}},[t("el-option",{key:"未审核",attrs:{label:"未审核",value:"未审核"}}),t("el-option",{key:"已通过",attrs:{label:"已通过",value:"已通过"}}),t("el-option",{key:"未通过",attrs:{label:"未通过",value:"未通过"}})],1):t("div",[e._v(e._s(e.form["examine_state"]))])],1)],1),t("el-col",{staticClass:"el_form_item_warp",attrs:{xs:24,sm:12,lg:8}},[t("el-form-item",{attrs:{label:"审核回复",prop:"examine_reply"}},["管理员"===e.user_group||e.form["examine_reply"]&&e.$check_examine()||!e.form["examine_reply"]&&e.$check_examine()?t("el-input",{attrs:{id:"examine_reply",placeholder:"请输入审核回复"},model:{value:e.form["examine_reply"],callback:function(r){e.$set(e.form,"examine_reply",r)},expression:"form['examine_reply']"}}):t("div",[e._v(e._s(e.form["examine_reply"]))])],1)],1)],1),t("el-col",{staticClass:"el_form_btn_warp",attrs:{xs:24,sm:12,lg:8}},[e.$check_action("/cancel_order/view","set")||e.$check_action("/cancel_order/view","add")||e.$check_option("/cancel_order/table","examine")?t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submit()}}},[e._v("提交")]),t("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("取消")])],1):t("el-form-item",[t("el-button",{on:{click:function(r){return e.cancel()}}},[e._v("返回")])],1)],1)],1):e._e()],1)},c=[],s=(t("b64b"),t("159b"),t("96cf"),t("1da1")),o=t("c6e7"),n={mixins:[o["a"]],data:function(){return{field:"cancel_order_id",url_add:"~/api/cancel_order/add?",url_set:"~/api/cancel_order/set?",url_get_obj:"~/api/cancel_order/get_obj?",url_upload:"~/api/cancel_order/upload?",query:{cancel_order_id:0},form:{user_account:0,user_name:"",order_number:"",cancel_time:"",reason_for_cancellation:"",examine_state:"未审核",examine_reply:"",cancel_order_id:0},disabledObj:{user_account_isDisabled:!1,user_name_isDisabled:!1,order_number_isDisabled:!1,cancel_time_isDisabled:!1,reason_for_cancellation_isDisabled:!1},list_user_user_account:[],group_user_user_account:""}},methods:{get_list_user_user_account:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$get("~/api/user/get_list?user_group=普通用户");case 2:t=r.sent,t.result&&t.result.list?e.list_user_user_account=t.result.list:t.error&&console.error(t.error);case 4:case"end":return r.stop()}}),r)})))()},get_group_user_user_account:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.form["user_account"]=e.user.user_id,r.next=3,e.$get("~/api/user_group/get_obj?name=普通用户");case 3:t=r.sent,t.result&&t.result.obj?e.group_user_user_account=t.result.obj:t.error&&console.error(t.error);case 5:case"end":return r.stop()}}),r)})))()},get_user_session_user_account:function(e){var r=this,t={user_id:e},a="~/api/"+r.group_user_user_account.source_table+"/get_obj?";this.$get(a,t,(function(t){if(t.result&&t.result.obj){var a=[];for(var c in t.result.obj)a.push(c);var s=[];for(var o in r.form)s.push(o);r.form["user_account"]=e,r.disabledObj["user_account_isDisabled"]=!0;for(var n=0;n<a.length;n++)if("examine_state"!==a[n]&&"examine_reply"!==a[n])for(var l=0;l<s.length;l++)if(a[n]===s[l]){if("user_account"!==a[n]){r.form[s[l]]=t.result.obj[a[n]],r.disabledObj[s[l]+"_isDisabled"]=!0;break}r.disabledObj[s[l]+"_isDisabled"]=!0}}}))},get_user_user_account:function(e){var r=this.list_user_user_account.getObj({user_id:e}),t="";return r&&(t=r.nickname?r.nickname:r.username),t},get_obj_before:function(e){var r=this,t="";return this.form&&t&&Object.keys(this.form).forEach((function(e){Object.keys(t).forEach((function(t){e===t&&(r.disabledObj[e+"_isDisabled"]=!0)}))})),this.form["cancel_time"]&&-1===this.form["cancel_time"].indexOf("-")&&(this.form["cancel_time"]=this.$toTime(parseInt(this.form["cancel_time"]),"yyyy-MM-dd")),$.db.del("form"),e},get_obj_after:function(e,r){"0000-00-00"==this.form["cancel_time"]&&(this.form["cancel_time"]=null),parseInt(this.form["cancel_time"])>9999&&(this.form["cancel_time"]=this.$toTime(parseInt(this.form["cancel_time"]),"yyyy-MM-dd"))},submit_check:function(e){return e.cancel_time?null:"取消时间不能为空"},is_view:function(){var e="管理员"==this.user_group;return e||(e=this.$check_action("/cancel_order/table","add"),console.log(e?"你有表格添加权限视作有添加权限":"你没有表格添加权限")),e||(e=this.$check_action("/cancel_order/table","set"),console.log(e?"你有表格添加权限视作有修改权限":"你没有表格修改权限")),e||(e=this.$check_action("/cancel_order/view","add"),console.log(e?"你有视图添加权限视作有添加权限":"你没有视图添加权限")),e||(e=this.$check_action("/cancel_order/view","set"),console.log(e?"你有视图修改权限视作有修改权限":"你没有视图修改权限")),e||(e=this.$check_action("/cancel_order/view","get"),console.log(e?"你有视图查询权限视作有查询权限":"你没有视图查询权限")),console.log(e?"具有当前页面的查看权，请注意这不代表你有字段的查看权":"无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行"),e},uploadimg:function(e){this.uploadFile(e.file,"avatar")}},created:function(){this.get_list_user_user_account(),this.get_group_user_user_account()}},l=n,_=(t("d10f"),t("2877")),i=Object(_["a"])(l,a,c,!1,null,null,null);r["default"]=i.exports},bb3f:function(e,r,t){},d10f:function(e,r,t){"use strict";t("bb3f")}}]);
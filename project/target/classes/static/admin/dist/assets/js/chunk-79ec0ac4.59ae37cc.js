(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79ec0ac4"],{"233a":function(t,e,r){},3628:function(t,e,r){"use strict";r("233a")},"80c6":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-main",{staticClass:"bg table_wrap order"},[r("el-form",{staticClass:"form p_4",attrs:{"label-position":"right",model:t.query,"label-width":"120"}},[r("el-row",{staticClass:"rows row1"},[r("el-col",{staticClass:"el_form_search_wrap",attrs:{xs:24,sm:12,lg:6}},[r("el-form-item",{attrs:{label:"订单号"}},[r("el-input",{model:{value:t.query.order_number,callback:function(e){t.$set(t.query,"order_number",e)},expression:"query.order_number"}})],1)],1),r("el-col",{staticClass:"el_form_search_wrap",attrs:{xs:24,sm:12,lg:6}},[r("el-form-item",{attrs:{label:"商品名称"}},[r("el-input",{model:{value:t.query.title,callback:function(e){t.$set(t.query,"title",e)},expression:"query.title"}})],1)],1),r("el-col",{staticClass:"el_form_search_wrap",attrs:{xs:24,sm:12,lg:6}},[r("el-form-item",{attrs:{label:"联系人姓名"}},[r("el-input",{model:{value:t.query.contact_name,callback:function(e){t.$set(t.query,"contact_name",e)},expression:"query.contact_name"}})],1)],1),r("el-col",{staticClass:"el_form_search_wrap",attrs:{xs:24,sm:12,lg:6}},[r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{model:{value:t.query.state,callback:function(e){t.$set(t.query,"state",e)},expression:"query.state"}},[r("el-option",{key:-1,attrs:{value:0,label:"无"}}),t._l(t.list_state,(function(t,e){return r("el-option",{key:e,attrs:{value:t,label:t}})}))],2)],1)],1)],1),r("el-row",{staticClass:"rows row2"},[r("el-col",{staticClass:"search_btn_wrap",attrs:{xs:24,sm:24,lg:24}},[r("el-col",{staticClass:"search_btn_1 btns",attrs:{xs:24,sm:12,lg:12}},[r("el-button",{staticClass:"search_btn_find",attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询")]),r("el-button",{staticClass:"search_btn_reset",on:{click:function(e){return t.reset()}}},[t._v("重置")]),"管理员"==t.user_group||t.$check_action("/order/table","del")?r("el-button",{staticClass:"float-right search_btn_del",attrs:{type:"danger"},on:{click:function(e){return t.delInfo()}}},[t._v("删除")]):t._e()],1)],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.list,stripe:""},on:{"selection-change":t.selectionChange,"sort-change":t.$sortChange}},[r("el-table-column",{attrs:{fixed:"",type:"selection","tooltip-effect":"dark",width:"55"}}),r("el-table-column",{attrs:{fixed:"",prop:"title",label:"商品名称",width:"120"}}),r("el-table-column",{attrs:{prop:"order_number",label:"订单号","min-width":"200"}}),r("el-table-column",{attrs:{prop:"img",label:"商品图片","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"demo-image__preview"},[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.$fullUrl(e.row.img),"preview-src-list":[t.$fullUrl(e.row.img)]}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:"/img/error.png"}})])])],1)]}}])}),r("el-table-column",{attrs:{prop:"price",label:"价格",sortable:"","min-width":"100"}}),r("el-table-column",{attrs:{prop:"price_ago",label:"原价",sortable:"","min-width":"100"}}),r("el-table-column",{attrs:{prop:"num",label:"购买数量",sortable:"","min-width":"120"}}),r("el-table-column",{attrs:{prop:"price_count",label:"总价",sortable:"","min-width":"100"}}),r("el-table-column",{attrs:{prop:"contact_name",label:"联系人名称",sortable:"","min-width":"120"}}),r("el-table-column",{attrs:{prop:"contact_address",label:"联系人地址","min-width":"180"}}),r("el-table-column",{attrs:{prop:"state",label:"订单状态","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["待退款"===e.row.state?r("div",[r("el-button",{attrs:{type:"danger",round:""},on:{click:function(r){return t.set_state(e.row)}}},[t._v("待退款")])],1):r("div",[t._v(" "+t._s(e.row.state)+" ")])]}}])}),r("el-table-column",{attrs:{prop:"user_id",label:"买家",sortable:"","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[t._v(" "+t._s(t.list_user.getVal("nickname",{user_id:e.row.user_id}))+" ")])]}}])}),r("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"180"}}),r("el-table-column",{attrs:{sortable:"",prop:"create_time",label:"创建时间","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$toTime(e.row["create_time"],"yyyy-MM-dd hh:mm:ss"))+" ")]}}])}),r("el-table-column",{attrs:{sortable:"",prop:"update_time",label:"更新时间","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$toTime(e.row["update_time"],"yyyy-MM-dd hh:mm:ss"))+" ")]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"view_a"},[r("button",{staticClass:"e-button el-button--small is-plain el-button--primary",attrs:{size:"small"},on:{click:function(r){return t.goTo_("./view?"+t.field+"="+e.row[t.field])}}},[r("span",[t._v("详情")])]),"已付款"==e.row["state"]&&"未配送"==e.row["delivery_state"]?r("button",{staticClass:"e-button el-button--small is-plain el-button--primary",attrs:{size:"small"},on:{click:function(r){return t.addLogi(e.row)}}},[r("span",[t._v("配送")])]):t._e()])]}}])})],1),r("div",{staticClass:"mt text_center"},[r("el-pagination",{attrs:{"current-page":t.query.page,"page-sizes":[7,10,30,100],"page-size":t.query.size,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"退款审批",visible:t.refund_view,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.refund_view=e}}},[r("span",[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"退款状态"}},[r("el-select",{model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},[r("el-option",{key:1,attrs:{label:"待退款",value:"待退款"}}),r("el-option",{key:2,attrs:{label:"已退款",value:"已退款"}}),r("el-option",{key:3,attrs:{label:"已拒绝",value:"已拒绝"}})],1)],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.refund_view=!1,t.form={state:""}}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.toSet()}}},[t._v("提交")])],1)])],1)},l=[],a=(r("a434"),r("a9e3"),r("d3b7"),r("25f0"),r("96cf"),r("1da1")),i=r("c6e7"),o={mixins:[i["a"]],data:function(){return{url_get_list:"~/api/order/get_list?like=0",url_set:"~/api/order/set?",url_del:"~/api/order/del?",field:"order_id",refund_view:!1,form:{state:""},query:{size:10,page:1,state:"",order_number:"",name:"",contact_name:""},list:[],list_user:[],list_state:["待付款","已付款"]}},methods:{goTo_:function(t){this.$router.push(t)},get_list_before:function(){"管理员"!==this.user_group&&(this.$check_option("/goods/table","seller")?this.url_get_list="~/api/order/get_business_order_list?user_id="+this.user.user_id:this.url_get_list="~/api/order/get_list?user_id="+this.user.user_id)},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then((function(r){e.form={state:""},t()})).catch((function(t){}))},toSet:function(){this.refund_view=!1,this.set({state:this.form.state},{order_id:this.form.order_id}),this.form={state:""},this.get_list()},set_state:function(t){this.form=Object.assign({},t),this.refund_view=1},deleteRow:function(t,e){e.splice(t,1)},table_class:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"table_class"},get_list_user:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("~/api/user/get_list?");case 2:r=e.sent,r.result?t.list_user=r.result.list:r.error&&console.error(r.error);case 4:case"end":return e.stop()}}),e)})))()},addLogi:function(t){var e=this,r=new Date,s=r.toStr("yyyy-MM-dd"),l={order_number:t.order_number,product_name:t.title,purchase_quantity:t.num,total_transaction_amount:t.price_count,the_date_of_issuance:s,delivery_number:Number(Math.random().toString().substr(3,12)+Date.now()).toString(36),shipping_address:t.contact_address,delivery_status:"待取货",signing_status:"待签收",logistics_delivery_id:0,contact_name:t.contact_name,merchant_id:t.merchant_id,ordinary_users:t.user_id};this.$post("~/api/logistics_delivery/add?",l,(function(r,s){r.result?e.$post("~/api/order/set?order_id="+t.order_id,{delivery_state:"已配送"},(function(t,r){t.result?(e.$toast("添加成功！","success"),setTimeout((function(){e.$router.push("/logistics_delivery/table")}),2e3)):t.error&&layer.msg(t.error.message)})):r.error&&e.$toast(r.error.message,"danger")}))}},created:function(){this.get_list_user()}},n=o,u=(r("3628"),r("2877")),c=Object(u["a"])(n,s,l,!1,null,null,null);e["default"]=c.exports}}]);
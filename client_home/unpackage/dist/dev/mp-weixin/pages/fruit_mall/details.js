(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/fruit_mall/details"],{"29dc":function(e,r,t){"use strict";t.r(r),function(e){t("6cdc"),t("66fd");var r=t("5393");wx.__webpack_require_UNI_MP_PLUGIN__=t,e(r["a"])}.call(this,t("543d")["createPage"])},"2ac9":function(e,r,t){"use strict";(function(e){var i=t("dc88"),o=function(){t.e("components/diy/list_comment").then(function(){return resolve(t("0ff7"))}.bind(null,t)).catch(t.oe)},s=function(){t.e("components/diy/bar_title").then(function(){return resolve(t("a3ca"))}.bind(null,t)).catch(t.oe)},l=function(){t.e("components/diy/form_editor").then(function(){return resolve(t("56c9"))}.bind(null,t)).catch(t.oe)};r["a"]={mixins:[i["a"]],components:{list_comment:o,bar_title:s,form_editor:l},data:function(){return{url_get_obj:"~/api/fruit_mall/get_obj?",field:"fruit_mall_id",query:{fruit_mall_id:0},obj:{fruit_origin:"",hits:0,praise_len:0,fruit_mall_id:0},praise:0,state_praise:!1,collect:0,state_collect:!1,list_comment:[],bar_title:"评论区",bar_url:""}},methods:{openUrl:function(r){console.log(1111),e.navigateTo({url:"/pages/webview/webview?url=".concat(r)})},get_praise:function(e){var r=this,t=this.user.user_id;this.$get("~/api/praise/count?",{source_table:"fruit_mall",source_field:"fruit_mall_id",source_id:e["fruit_mall_id"]},(function(e){e.result||0===e.result?(r.praise=e.result,console.log("点赞数：",e.result)):e.error&&(r.$toast(e.error.message),console.error(e.error))})),this.$get("~/api/praise/count?",{source_table:"fruit_mall",source_field:"fruit_mall_id",source_id:e["fruit_mall_id"],user_id:t},(function(e){e.result||0===e.result?(r.state_praise=!!e.result,console.log("点赞状态：",e.result)):e.error&&(r.$toast(e.error.message),console.error(e.error))}))},change_praise:function(e){var r=this,t=this.user.user_id,i={source_table:"fruit_mall",source_field:"fruit_mall_id",source_id:this.obj["fruit_mall_id"],user_id:t},o=this;o.obj.praise_len=parseInt(o.obj.praise_len),this.state_praise?(this.state_praise=!1,this.$get("~/api/praise/del?",i,(function(e){if(e.result){var t=o.obj.praise_len-1;r.$post("~/api/fruit_mall/set?fruit_mall_id="+o.obj["fruit_mall_id"],{praise_len:t},(function(e){e.result?console.log("添加点赞数状态：",e.result):e.error&&console.error(e.error)})),r.$toast("取消点赞")}else e.error&&(r.$toast(e.error.message),console.error(e.error))}))):(this.state_praise=!0,this.$post("~/api/praise/add?",i,(function(e){if(e.result){var t=o.obj.praise_len+1;r.$post("~/api/fruit_mall/set?fruit_mall_id="+o.obj["fruit_mall_id"],{praise_len:t},(function(e){e.result?console.log("添加点赞数状态：",e.result):e.error&&console.error(e.error)})),r.$toast("点赞成功")}else e.error&&(r.$toast(e.error.message),console.error(e.error))})))},get_collect:function(e){var r=this,t=this.user.user_id,i={source_table:"fruit_mall",source_field:"fruit_mall_id",source_id:e["fruit_mall_id"],user_id:t};this.$get("~/api/collect/count?",i,(function(e){if(console.log(e),e.result||0===e.result){var t=!!e.result;r.state_collect=t,console.log("收藏状态："+t)}else e.error&&console.error(e.error)}))},change_collect:function(){var e=this,r=this.user.user_id,t={source_table:"fruit_mall",source_field:"fruit_mall_id",source_id:this.obj["fruit_mall_id"],user_id:r};this.state_collect?(this.state_collect=!1,this.$get("~/api/collect/del?",t,(function(r){r.result?e.$toast("取消收藏"):r.error&&(e.$toast(r.error.message),console.error(r.error))}))):(this.state_collect=!0,this.$post("~/api/collect/add?",t,(function(r){r.result?e.$toast("收藏成功"):r.error&&(e.$toast(r.error.message),console.error(r.error))})))},get_comment:function(e){var r=this;this.$get("~/api/comment/get_list?",{source_table:"fruit_mall",source_field:"fruit_mall_id",source_id:e["fruit_mall_id"]},(function(e){if(e.result&&e.result.list){var t=e.result.list;r.list_comment=t,console.log("评论请求结果：",t)}else e.error&&console.error(e.error)}))},add_hits:function(e){var r=this;e["hits"]=e["hits"]+1;var t=e["hits"];this.$post("~/api/fruit_mall/set?fruit_mall_id="+e["fruit_mall_id"],{hits:t},(function(e){if(e.result){console.log("添加访问量状态：",e.result);var t={source_table:"fruit_mall",source_field:"fruit_mall_id",source_id:r.obj.fruit_mall_id,user_id:r.$store.state.user.user_id};r.$post("~/api/hits/add?",t,(function(e){console.log(e)}))}else e.error&&console.error(e.error)}))},get_obj_after:function(e){if(this.obj){var r=this.obj;this.get_praise(r),this.get_collect(r),this.get_comment(r),this.add_hits(r)}}},created:function(){},mounted:function(){}}}).call(this,t("543d")["default"])},"47b8":function(e,r,t){},5393:function(e,r,t){"use strict";var i,o={uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("components/uni-icons/uni-icons")]).then(t.bind(null,"2ba4"))}},s=function(){var e=this,r=e.$createElement,t=(e._self._c,e.$check_field("get","fruit_origin"));e.$mp.data=Object.assign({},{$root:{m0:t}})},l=[],a=t("2ac9"),n=a["a"],u=(t("88ac"),t("f0c5")),c=Object(u["a"])(n,s,l,!1,null,null,null,!1,o,i);r["a"]=c.exports},"88ac":function(e,r,t){"use strict";var i=t("47b8"),o=t.n(i);o.a}},[["29dc","common/runtime","common/vendor"]]]);